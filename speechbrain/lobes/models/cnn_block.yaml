# The block index is multiplied with the channels to get out_channels
block_index: !PLACEHOLDER
channels: 128
kernel_size: (3, 3)

block: !new:speechbrain.nnet.containers.Sequential
    - !ref <conv1>
    - !ref <norm1>
    - !ref <act1>
    - !ref <conv2>
    - !ref <norm2>
    - !ref <act2>
    - !ref <pooling>
    - !ref <dropout>

conv1: !new:speechbrain.nnet.CNN.Conv
    out_channels: !ref <block_index> * <channels>
    kernel_size: !ref <kernel_size>

norm1: !new:speechbrain.nnet.normalization.Normalize
    norm_type: batchnorm

act1: !new:torch.nn.LeakyReLU []

conv2: !new:speechbrain.nnet.CNN.Conv
    out_channels: !ref <block_index> * <channels>
    kernel_size: !ref <kernel_size>

norm2: !new:speechbrain.nnet.normalization.Normalize
    norm_type: batchnorm

act2: !new:torch.nn.LeakyReLU []

pooling: !new:speechbrain.nnet.pooling.Pooling
    pool_type: max
    kernel_size: 2
    stride: 2

dropout: !new:speechbrain.nnet.dropout.Dropout
    drop_rate: 0.15
